{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/loadMoreBtn.js","<<jsx-config-pragma.js>>","src/js/NewsApi.js","src/js/newsApiAsync.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden = false }) {\n    this.button = this.getButton(selector);\n\n    // if (isHidden) {\n    //   this.hide();\n    // }\n    isHidden && this.hide();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  enebled() {\n    this.button.removeAttribute('disabled');\n    this.button.disebled = false;\n    this.button.textContent = 'Load More';\n  }\n\n  disable() {\n    this.button.disebled = true;\n    this.button.textContent = 'Loading.....';\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n}\n",null,"const ENDPOINT = 'https://newsapi.org/v2/everything';\nconst API_KEY = 'd8847f02a17a4f339957c5e8d851cb8e';\n\n//* Пишемо через клас\nexport default class NewsApi {\n  constructor() {\n    this.queryPage = 1;\n    this.searchQuery = '';\n  }\n\n  // !Через axios\n  //   getNews() {\n  //     const url = `${ENDPOINT}?q=${this.searchQuery}&pageSize=5&page=${this.queryPage}`;\n  //     const options = {\n  //       headers: {\n  //         'X-Api-Key': API_KEY,\n  //       },\n  //     };\n\n  //     return axios.get(url, options).then(data => {\n  //       this.incrementPage();\n  //       return data.data;\n  //     });\n  //   }\n\n  // !через async aweit\n  async getNews() {\n    const url = `${ENDPOINT}?q=${this.searchQuery}&pageSize=5&page=${this.queryPage}`;\n    const options = {\n      headers: {\n        'X-Api-Key': API_KEY,\n      },\n    };\n\n    const response = await axios.get(url, options);\n    this.incrementPage();\n    return response.data.articles;\n\n    //   return axios.get(url, options).then(data => {\n    //   this.incrementPage();\n    //   return data.data;\n    // });\n  }\n\n  resetPage() {\n    this.queryPage = 1;\n  }\n\n  incrementPage() {\n    this.queryPage += 1;\n  }\n}\n","import LoadMoreBtn from './loadMoreBtn';\nimport NewsApi from './NewsApi';\n\nconst form = document.getElementById('form');\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '#loadMoreBtn',\n  isHidden: true,\n});\nconst newsApi = new NewsApi();\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.button.addEventListener('click', fetchNews);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  newsApi.searchQuery = form.elements.news.value.trim();\n  clearNewsList();\n  newsApi.resetPage();\n  loadMoreBtn.show();\n\n  fetchNews().finally(() => form.reset());\n}\n\nfunction createMurkup({ author, title, description, url, urlToImage }) {\n  return `\n  <div class=\"article-card\">\n  <h2 class=\"article-title\">${title}</h2>\n  <h3 class=\"aricle-author\">${author || 'Anonym'}</h3>\n  <img src=${urlToImage} class=\"article-img\">\n  <p class=\"article-description\">${description}</p>\n  <a href=${url} class=\"article-link\" target =_blank>Read more</a>\n  </div>\n    `;\n}\n\nfunction updateNewsList(markup) {\n  document\n    .getElementById('articlesWrapper')\n    .insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearNewsList() {\n  document.getElementById('articlesWrapper').innerHTML = '';\n}\n\nfunction onError(err) {\n  console.error(err);\n  updateNewsList('<p>Articles not found</p>');\n}\n\nfunction fetchNews() {\n  loadMoreBtn.disable();\n  return newsApi\n    .getNews()\n    .then(({ articles }) => {\n      if (articles.length === 0) throw new Error('No data');\n      //   console.log(createMurkup(articles[0]));\n      return articles.reduce(\n        (markup, article) => createMurkup(article) + markup,\n        ''\n      );\n    })\n    .then(markup => {\n      updateNewsList(markup);\n      loadMoreBtn.enebled();\n    })\n    .catch(onError);\n}\n"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$817fd481ae4e523e$export$2e2bcd8739ae039","LoadMoreBtn","param","selector","_isHidden","isHidden","this","button","getButton","hide","document","querySelector","removeAttribute","disebled","textContent","classList","add","remove","$bpxeT","parcelRequire","$68227839101bb5c9$export$2e2bcd8739ae039","NewsApi","queryPage","searchQuery","$parcel$interopDefault","$2TvXO","mark","_callee","url","options","response","concat","_this","headers","axios","get","_ctx","sent","incrementPage","data","articles","$16c643e10c3ec187$var$form","getElementById","$16c643e10c3ec187$var$loadMoreBtn","$16c643e10c3ec187$var$newsApi","$16c643e10c3ec187$var$updateNewsList","markup","insertAdjacentHTML","$16c643e10c3ec187$var$onError","err","console","error","$16c643e10c3ec187$var$fetchNews","disable","getNews","then","Error","reduce","article","author","title","description","urlToImage","$16c643e10c3ec187$var$createMurkup","enebled","catch","addEventListener","e","preventDefault","form1","currentTarget","elements","news","trim","innerHTML","resetPage","show","finally","reset"],"version":3,"file":"newsApiAsync.ef923d47.js.map"}