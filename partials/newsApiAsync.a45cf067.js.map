{"mappings":"AAGA,MAAMA,EAAOC,SAASC,eAAe,QAC/BC,EAAc,ICJL,MACbC,aAAYC,SAAEA,EAAQC,SAAEA,GAAW,IACjCC,KAAKC,OAASD,KAAKE,UAAUJ,GAK7BC,GAAYC,KAAKG,M,CAGnBD,UAAUJ,GACR,OAAOJ,SAASU,cAAcN,E,CAGhCO,UACEL,KAAKC,OAAOK,gBAAgB,YAC5BN,KAAKC,OAAOM,UAAW,EACvBP,KAAKC,OAAOO,YAAc,W,CAG5BC,UACET,KAAKC,OAAOM,UAAW,EACvBP,KAAKC,OAAOO,YAAc,c,CAG5BL,OACEH,KAAKC,OAAOS,UAAUC,IAAI,S,CAG5BC,OACEZ,KAAKC,OAAOS,UAAUG,OAAO,S,GD1BG,CAClCf,SAAU,eACVC,UAAU,IAENe,EAAU,IEJD,MACbjB,cACEG,KAAKe,UAAY,EACjBf,KAAKgB,YAAc,E,CAmBrBC,gBACE,MAAMC,EAAM,uCAAiBlB,KAAKgB,+BAA+BhB,KAAKe,YAChEI,EAAU,CACdC,QAAS,CACP,YA7BQ,qCAiCNC,QAAiBC,MAAMC,IAAIL,EAAKC,GAEtC,OADAnB,KAAKwB,gBACEH,EAASI,KAAKC,Q,CAQvBC,YACE3B,KAAKe,UAAY,C,CAGnBS,gBACExB,KAAKe,WAAa,C,GFZtB,SAASa,EAAeC,GACtBnC,SACGC,eAAe,mBACfmC,mBAAmB,YAAaD,E,CAOrC,SAASE,EAAQC,GACfC,QAAQC,MAAMF,GACdJ,EAAe,4B,CAGjB,SAASO,IAEP,OADAvC,EAAYa,UACLK,EACJsB,UACAC,MAAK,EAACX,SAAEA,MACP,GAAwB,IAApBA,EAASY,OAAc,MAAM,IAAIC,MAAM,WAE3C,OAAOb,EAASc,QACd,CAACX,EAAQY,IAnCjB,UAAsBC,OAAEA,EAAMC,MAAEA,EAAKC,YAAEA,EAAW1B,IAAEA,EAAG2B,WAAEA,IACvD,MAAO,+DAEqBF,uCACAD,GAAU,6BAC3BG,4DACsBD,oBACvB1B,qE,CA4BiB4B,CAAaL,GAAWZ,GAC7C,GACD,IAEFQ,MAAKR,IACJD,EAAeC,GACfjC,EAAYS,SAAS,IAEtB0C,MAAMhB,E,CA1DXtC,EAAKuD,iBAAiB,UAGtB,SAAkBC,GAChBA,EAAEC,iBAEF,MAAMC,EAAOF,EAAEG,cACftC,EAAQE,YAAcmC,EAAKE,SAASC,KAAKC,MAAMC,OA2B/C9D,SAASC,eAAe,mBAAmB8D,UAAY,GAzBvD3C,EAAQa,YACR/B,EAAYgB,OAEZuB,IAAYuB,SAAQ,IAAMP,EAAKQ,S,IAXjC/D,EAAYK,OAAO+C,iBAAiB,QAASb","sources":["src/js/newsApiAsync.js","src/js/loadMoreBtn.js","src/js/NewsApi.js"],"sourcesContent":["import LoadMoreBtn from './loadMoreBtn';\nimport NewsApi from './NewsApi';\n\nconst form = document.getElementById('form');\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '#loadMoreBtn',\n  isHidden: true,\n});\nconst newsApi = new NewsApi();\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.button.addEventListener('click', fetchNews);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  newsApi.searchQuery = form.elements.news.value.trim();\n  clearNewsList();\n  newsApi.resetPage();\n  loadMoreBtn.show();\n\n  fetchNews().finally(() => form.reset());\n}\n\nfunction createMurkup({ author, title, description, url, urlToImage }) {\n  return `\n  <div class=\"article-card\">\n  <h2 class=\"article-title\">${title}</h2>\n  <h3 class=\"aricle-author\">${author || 'Anonym'}</h3>\n  <img src=${urlToImage} class=\"article-img\">\n  <p class=\"article-description\">${description}</p>\n  <a href=${url} class=\"article-link\" target =_blank>Read more</a>\n  </div>\n    `;\n}\n\nfunction updateNewsList(markup) {\n  document\n    .getElementById('articlesWrapper')\n    .insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearNewsList() {\n  document.getElementById('articlesWrapper').innerHTML = '';\n}\n\nfunction onError(err) {\n  console.error(err);\n  updateNewsList('<p>Articles not found</p>');\n}\n\nfunction fetchNews() {\n  loadMoreBtn.disable();\n  return newsApi\n    .getNews()\n    .then(({ articles }) => {\n      if (articles.length === 0) throw new Error('No data');\n      //   console.log(createMurkup(articles[0]));\n      return articles.reduce(\n        (markup, article) => createMurkup(article) + markup,\n        ''\n      );\n    })\n    .then(markup => {\n      updateNewsList(markup);\n      loadMoreBtn.enebled();\n    })\n    .catch(onError);\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden = false }) {\n    this.button = this.getButton(selector);\n\n    // if (isHidden) {\n    //   this.hide();\n    // }\n    isHidden && this.hide();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  enebled() {\n    this.button.removeAttribute('disabled');\n    this.button.disebled = false;\n    this.button.textContent = 'Load More';\n  }\n\n  disable() {\n    this.button.disebled = true;\n    this.button.textContent = 'Loading.....';\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n}\n","const ENDPOINT = 'https://newsapi.org/v2/everything';\nconst API_KEY = 'd8847f02a17a4f339957c5e8d851cb8e';\n\n//* Пишемо через клас\nexport default class NewsApi {\n  constructor() {\n    this.queryPage = 1;\n    this.searchQuery = '';\n  }\n\n  // !Через axios\n  //   getNews() {\n  //     const url = `${ENDPOINT}?q=${this.searchQuery}&pageSize=5&page=${this.queryPage}`;\n  //     const options = {\n  //       headers: {\n  //         'X-Api-Key': API_KEY,\n  //       },\n  //     };\n\n  //     return axios.get(url, options).then(data => {\n  //       this.incrementPage();\n  //       return data.data;\n  //     });\n  //   }\n\n  // !через async aweit\n  async getNews() {\n    const url = `${ENDPOINT}?q=${this.searchQuery}&pageSize=5&page=${this.queryPage}`;\n    const options = {\n      headers: {\n        'X-Api-Key': API_KEY,\n      },\n    };\n\n    const response = await axios.get(url, options);\n    this.incrementPage();\n    return response.data.articles;\n\n    //   return axios.get(url, options).then(data => {\n    //   this.incrementPage();\n    //   return data.data;\n    // });\n  }\n\n  resetPage() {\n    this.queryPage = 1;\n  }\n\n  incrementPage() {\n    this.queryPage += 1;\n  }\n}\n"],"names":["$f18f8f0ce029245a$var$form","document","getElementById","$f18f8f0ce029245a$var$loadMoreBtn","constructor","selector","isHidden","this","button","getButton","hide","querySelector","enebled","removeAttribute","disebled","textContent","disable","classList","add","show","remove","$f18f8f0ce029245a$var$newsApi","queryPage","searchQuery","async","url","options","headers","response","axios","get","incrementPage","data","articles","resetPage","$f18f8f0ce029245a$var$updateNewsList","markup","insertAdjacentHTML","$f18f8f0ce029245a$var$onError","err","console","error","$f18f8f0ce029245a$var$fetchNews","getNews","then","length","Error","reduce","article","author","title","description","urlToImage","$f18f8f0ce029245a$var$createMurkup","catch","addEventListener","e","preventDefault","form1","currentTarget","elements","news","value","trim","innerHTML","finally","reset"],"version":3,"file":"newsApiAsync.a45cf067.js.map"}